# 1
!pip install openai
import csv
import pandas
import openai

# 2
openai.api_key = "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"

# 3
import csv

# opening the CSV file
with open('whole_data.csv', mode ='r')as file:

  # reading the CSV file
  csvFile = csv.reader(file)

  # displaying the contents of the CSV file
  # for loop to find our columns
  for lines in csvFile:
        print('IT IS 3:industry',lines[3])
        print('IT IS 4:description',lines[4])

def get_response(prompt, model = "gpt-3.5-turbo"):
  responses = []


  restart_sequence = "\n"
  with open('whole_data.csv', 'r') as csv_file:
    csv_reader = csv.reader(csv_file)

    # Skip the header row if necessary
    next(csv_reader)

    # Iterate over each row in the CSV file
    for row in csv_reader:
        # Assuming your CSV has a column named '-------'
        question = row[4]
        prompt = f"do you think for {question} how could we label it ?"
        #question = row[description]
        response = openai.Completion.create(
        model=model,
        messages=[{"role": "user", "content": prompt}],
        temperature=0,
        max_tokens=20,
        top_p=1,
        frequency_penalty=0,
        presence_penalty=0
        )
        responses.append(response['choices'][0]['message']['content'])
        print(responses.text)
  return responses
